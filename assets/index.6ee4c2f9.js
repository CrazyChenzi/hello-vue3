import{d as e,l as a,x as l,r as t,o as u,b as n,F as o,f as s,g as p,t as r,y as d,z as v,h as i,w as c}from"./vendor.b069311d.js";var g,f;(f=g||(g={})).REPEAT="repeat",f.VALIDATE="validate";var y=e({props:{type:{type:String,default:""},placeholder:{type:String,default:"请输入..."},readonly:{type:Boolean,default:!1},value:{type:Array,default:()=>[]},width:{type:Number,default:300},isReplaceRepeat:{type:Boolean,default:!1},validate:{type:[RegExp,Function],default:()=>{}}},setup({value:e,validate:t,isReplaceRepeat:u,readonly:n},{emit:o}){const s=a(""),p=a(""),r=l([...e]),d=a(!1),v=a(null),i=()=>{if(console.log(s.value),s.value){if(t){if(!c())return void(p.value!==s.value&&(o("message",{status:g.VALIDATE,tag:s.value}),p.value=s.value))}if(u&&r.length){if(r.find((e=>e===s.value)))return void(p.value!==s.value&&(o("message",{status:g.REPEAT,tag:s.value}),p.value=s.value))}r.push(s.value),s.value="",p.value="",f()}},c=()=>"function"==typeof t?t(s.value):t.test(s.value),f=()=>{o("input",r)};return{newTag:s,previousTag:p,innerTags:r,isInputActive:d,input_tag_ref:v,addNew:i,handleInputFocus:()=>{d.value=!0},handleInputBlur:()=>{d.value=!1,i()},focusNewTag:()=>{var e;n||null==(e=v.value)||e.focus()},removeTag:(e,a)=>{r.splice(a,1),f()},removeLastTag:()=>{s.value||p.value?s.value||(p.value=""):(r.pop(),f())}}}});const T=c(),w=T(((e,a,l,c,g,f)=>{const y=t("el-tag"),w=t("el-input");return u(),n("div",{class:[{"input-tag_wrapper--readonly":e.readonly,"input-tag_wrapper--active":e.isInputActive},"input-tag_wrapper"],style:{width:e.width+"px"},onClick:a[2]||(a[2]=(...a)=>e.focusNewTag&&e.focusNewTag(...a))},[(u(!0),n(o,null,s(e.innerTags,((a,l)=>(u(),n(y,{key:l,class:"input-tag",closable:!e.readonly,type:e.type,onClose:t=>e.removeTag(a,l)},{default:T((()=>[p(r(a),1)])),_:2},1032,["closable","type","onClose"])))),128)),e.readonly?i("",!0):(u(),n(w,{key:0,ref:"input_tag_ref",modelValue:e.newTag,"onUpdate:modelValue":a[1]||(a[1]=a=>e.newTag=a),class:"new-tag",placeholder:e.placeholder,"validate-event":!1,onKeyup:[d(v(e.addNew,["stop"]),["enter"]),d(v(e.removeLastTag,["stop"]),["delete"])],onBlur:e.handleInputBlur,onFocus:e.handleInputFocus},null,8,["modelValue","placeholder","onKeyup","onBlur","onFocus"]))],6)}));y.render=w,y.__scopeId="data-v-b180e24c";export default y;
